# logolink <a href = "https://danielvartan.github.io/logolink/"><img src = "man/figures/logo.svg" align="right" width="120" /></a>

<!-- quarto render -->

<!-- Install the package before rendering this file: `devtools::install()` -->

```{r}
#| label: setup
#| include: false

library(logolink)

library(badger)
library(brandr)
library(dplyr)
library(ggplot2)
library(here)
library(htmltools)
library(knitr)

badge_codecov() |> invisible() # To avoid unnecessary messages.

source(here("R", ".setup.R"))
```

<!-- badges: start -->
```{r}
#| echo: false
#| output: asis
#| message: false
#| warning: false

cat(
  badge_repostatus("active"),
  paste0(
    "[![",
    "CRAN Status Badge",
    "](",
    "https://www.r-pkg.org/badges/version-ago/logolink",
    ")](",
    "https://cran.r-project.org/package=logolink",
    ")"
  ),
  badge_custom(
    x = "doi",
    y = "10.32614/CRAN.package.logolink",
    color = "1284C5",
    url = "https://doi.org/10.32614/CRAN.package.logolink",
    alt = "DOI badge"
  ),
  badge_cran_download(type = "grand-total"),
  badge_github_actions(action = "R-CMD-check"),
  badge_cran_checks("logolink"),
  paste0(
    "[![",
    "FAIR checklist badge",
    "](",
    "https://img.shields.io/badge/",
    "fairsoftwarechecklist.net", "-",
    "-",
    "00a7d9",
    ")](",
    "https://fairsoftwarechecklist.net/v0.2/?f=31&a=32113&i=32322&r=133",
    ")"
  ),
  badge_codecov(),
  badge_license(
    license = "GPLv3",
    color = "bd0000",
    url = "https://www.gnu.org/licenses/gpl-3.0",
    alt = "GNU GPLv3 License"
  ),
  paste0(
    "[![",
    "FAIR checklist badge",
    "](",
    "https://img.shields.io/badge/",
    "fairsoftwarechecklist.net", "-",
    "-",
    "00a7d9",
    ")](",
    "https://fairsoftwarechecklist.net/v0.2/?f=31&a=32113&i=32322&r=133",
    ")"
  ),
  paste0(
    "[![",
    "fair-software.eu",
    "](",
    "https://img.shields.io/badge/",
    "fair--software.eu", "-",
    "%E2%97%8F%20%20%E2%97%8F%20%20%E2%97%8F%20%20%E2%97%8F%20%20%E2%97%8F",
    "-",
    "green",
    ")](",
    "https://fair-software.eu",
    ")"
  ),
  badge_custom(
    x = "Contributor%20Covenant",
    y = "3.0",
    color = "4baaaa",
    url = "https://www.contributor-covenant.org/version/3/0/code_of_conduct/",
    alt = "Contributor Covenant 3.0 Code of Conduct"
  )
)
```
<!-- badges: end -->

## Overview

> **Note**: The [CRAN](https://cran.r-project.org/) release of `logolink` breaks with the recent NetLogo patch updates because the [BehaviorSpace XML format](https://github.com/NetLogo/NetLogo/wiki/XML-File-Format) changed. The details are in this [GitHub issue](https://github.com/NetLogo/NetLogo/issues/2560). If your experiments fail to run, install the development version of `logolink` from GitHub as shown in the Installation section below. An updated [CRAN](https://cran.r-project.org/) release will be submitted soon.

`logolink` is an [R](https://www.r-project.org/) package that simplifies setting up and running [NetLogo](https://www.netlogo.org/) simulations directly from R. It provides a modern, intuitive interface that follows [tidyverse principles](https://tidyverse.tidyverse.org/articles/manifesto.html) and integrates seamlessly with the [tidyverse ecosystem](https://tidyverse.org/).

The package is designed to work with NetLogo **7.0.1 and above**. We do not plan to offer support for earlier versions. See NetLogo's [Transition Guide](https://docs.netlogo.org/transition.html) to upgrade your models if needed.

> If you find this project useful, please consider giving it a star! &nbsp; [![GitHub Repository Stars](https://img.shields.io/github/stars/danielvartan/logolink)](https://github.com/danielvartan/logolink/)

> The continuous development of `logolink` depends on community support. If you can afford to do so, please consider becoming a sponsor. &nbsp; [![](https://img.shields.io/static/v1?label=Sponsor&message=%E2%9D%A4&logo=GitHub&color=%23fe8e86)](https://github.com/sponsors/danielvartan)

## Another R Package for NetLogo?

While other R packages connect R to NetLogo, `logolink` is currently the only one that fully supports the latest NetLogo release. It is actively maintained, follows [tidyverse conventions](https://design.tidyverse.org/), and is designed to be simple and straightforward to use.

For context, [`RNetLogo`](https://CRAN.R-project.org/package=RNetLogo) supports only older versions (up to 6.0.0, released in December 2016) and has not been updated since June 2017. [`nlrx`](https://CRAN.R-project.org/package=nlrx) offers a powerful framework for managing experiments and results, but [supports](https://docs.ropensci.org/nlrx/reference/supported_netlogo_versions.html) only up to NetLogo 6.3.0 (released in September 2022), requires additional system dependencies, uses its own internal conventions that diverge from NetLogo standards, has a steep learning curve, and has [many unresolved issues](https://github.com/ropensci/nlrx/issues).

`logolink` **complements** these packages by prioritizing simplicity, offering finer control over output, ensuring full compatibility with NetLogo 7, and integrating seamlessly with modern R workflows.

## Installation

You can install the released version of `logolink` from [CRAN](https://CRAN.R-project.org) with:

```r
install.packages("logolink")
```

And the development version from [GitHub](https://github.com/) with:

```r
# install.packages("remotes")
remotes::install_github("danielvartan/logolink")
```

## Usage

`logolink` usage is very straightforward. The main functions are:

- [`create_experiment`](https://danielvartan.github.io/logolink/reference/create_experiment.html): Create NetLogo BehaviorSpace experiment.
- [`run_experiment`](https://danielvartan.github.io/logolink/reference/run_experiment.html): Run NetLogo BehaviorSpace experiment.

Along with this package, you will also need NetLogo 7.0.1 or higher installed on your computer. You can download it from the [NetLogo website](https://www.netlogo.org).

After installing NetLogo and `logolink`, start by loading the package with:

```{r}
library(logolink)
```

### Setting the NetLogo Path

`logolink` will try to find out the path to the NetLogo installation automatically. This is usually successful, but if it fails, you will need to set it manually. In that case, see the documentation for the [`run_experiment`](https://danielvartan.github.io/logolink/reference/run_experiment.html) function for more details.

### Creating an Experiment

To start running your model from R you first need to setup an experiment. You can do this by setting a [BehaviorSpace](https://docs.netlogo.org/behaviorspace.html) experiment with the [`create_experiment`](https://danielvartan.github.io/logolink/reference/create_experiment.html) function. This function will create a [XML](https://en.wikipedia.org/wiki/XML) file that contains all the information about your experiment, including the parameters to vary, the metrics to collect, and the number of runs to perform.

Alternatively, you can set up your experiment [directly in NetLogo](https://docs.netlogo.org/behaviorspace.html#how-it-works) and save it as part of your model. In this case, you can skip the [`create_experiment`](https://danielvartan.github.io/logolink/reference/create_experiment.html) step and just provide the name of the experiment when running the model with [`run_experiment`](https://danielvartan.github.io/logolink/reference/run_experiment.html).

Example:

```{r}
setup_file <- create_experiment(
  name = "Wolf Sheep Simple Model Analysis",
  repetitions = 10,
  sequential_run_order = TRUE,
  run_metrics_every_step = TRUE,
  setup = "setup",
  go = "go",
  time_limit = 1000,
  metrics = c(
    'count wolves',
    'count sheep'
  ),
  run_metrics_condition = NULL,
  constants = list(
    "number-of-sheep" = 500,
    "number-of-wolves" = list(
      first = 5,
      step = 1,
      last = 15
    ),
    "movement-cost" = 0.5,
    "grass-regrowth-rate" = 0.3,
    "energy-gain-from-grass" = 2,
    "energy-gain-from-sheep" = 5
  )
)
```

If you want to inspect the created experiment file, you can use the [`inspect_experiment`](https://danielvartan.github.io/logolink/reference/inspect_experiment.html) function:

```{r}
setup_file |> inspect_experiment()
```

### Running an Experiment

With the experiment file created, you can now run your model using the [`run_experiment`](https://danielvartan.github.io/logolink/reference/run_experiment.html) function. This function will execute the NetLogo model with the specified parameters and return the results as [tidy data frames](https://r4ds.hadley.nz/data-tidy.html).

First, you need to specify the path to your NetLogo model. In this example, we will use the [Wolf Sheep Simple](https://www.netlogoweb.org/launch#https://www.netlogoweb.org/assets/modelslib/IABM%20Textbook/chapter%204/Wolf%20Sheep%20Simple%205.nlogox) model that comes with any NetLogo installation. For that, we can use the [`find_netlogo_home`](https://danielvartan.github.io/logolink/reference/find_netlogo_home.html) function to locate the NetLogo installation directory and then build the path to the model file.

```{r}
model_path <-
  find_netlogo_home() |>
  file.path(
    "models",
    "IABM Textbook",
    "chapter 4",
    "Wolf Sheep Simple 5.nlogox"
  )
```

After specifying the model path, you can run the experiment with:

```{r}
#| label: run_experiment
#| output: false

results <-
  model_path |>
  run_experiment(
    setup_file = setup_file
  )
```

### Checking the Results

`logolink` supports the [four output formats](https://docs.netlogo.org/behaviorspace.html#run-options-formats) available in [BehaviorSpace](https://docs.netlogo.org/behaviorspace.html): [Table](https://docs.netlogo.org/behaviorspace.html#table-output), [Spreadsheet](https://docs.netlogo.org/behaviorspace.html#spreadsheet-output), [Lists](https://docs.netlogo.org/behaviorspace.html#lists-output), and [Statistics](https://docs.netlogo.org/behaviorspace.html#statistics-output). By default, only the [Table](https://docs.netlogo.org/behaviorspace.html#table-output) format is returned, along with some metadata about the experiment run.

```{r}
library(dplyr)

results |> glimpse()
```

If you already have an file with experiment results, you can read it into R using the [`read_experiment`](https://danielvartan.github.io/logolink/reference/read_experiment.html) function, which will yield the same output structure as [`run_experiment`](https://danielvartan.github.io/logolink/reference/run_experiment.html).

### Analyzing the Data (Bonus Section)

Below is a simple example of how to visualize the results using [`ggplot2`](https://ggplot2.tidyverse.org/).

```{r}
#| output: false

library(dplyr)
library(magrittr)

data <-
  results |>
  extract2("table") |>
  select(where(is.numeric)) |>
  summarize(
    across(everything(), ~ mean(.x, na.rm = TRUE)),
    .by = c(step, number_of_wolves)
  ) |>
  arrange(number_of_wolves, step)
```

```{r}
#| label: readme-wolf-sheep-model-plot-1
#| fig-alt: Line plot showing the average number of sheep over time for different initial numbers of wolves.

library(ggplot2)

data |>
  mutate(number_of_wolves = as.factor(number_of_wolves)) |>
  ggplot(
    aes(
      x = step,
      y = count_sheep,
      group = number_of_wolves,
      color = number_of_wolves
    )
  ) +
  geom_line() +
  labs(
    x = "Time Step",
    y = "Average Number of Sheep",
    color = "Wolves"
  )
```

### Visualizing the NetLogo World (Bonus Section)

`logolink` also includes tutorials to help you get the most out of NetLogo in R. The [Visualizing the NetLogo World](https://danielvartan.github.io/logolink/articles/visualizing-the-netlogo-world.html) tutorial demonstrates how to plot the NetLogo world at specific time steps and animate its evolution over time. You can find it [here](https://danielvartan.github.io/logolink/articles/visualizing-the-netlogo-world.html).

![](man/figures/vignette-wolf-sheep-model-animation-1.gif)

Click [here](https://danielvartan.github.io/logolink/reference/) to see the full list of `logolink` functions.

For complete guidance on setting up and running experiments in NetLogo, please refer to the [BehaviorSpace Guide](https://docs.netlogo.org/behaviorspace.html).

## Citation

```{r}
#| echo: false
#| output: asis

cat(
  badge_custom(
    x = "doi",
    y = "10.32614/CRAN.package.logolink",
    color = "1284C5",
    url = "https://doi.org/10.32614/CRAN.package.logolink",
    alt = "DOI badge"
  )
)
```

If you use this package in your research, please cite it to acknowledge the effort put into its development and maintenance. Your citation helps support its continued improvement.

```{r}
citation("logolink")
```

## License

```{r}
#| echo: false
#| output: asis

cat(
  badge_license(
    license = "GPLv3",
    color = "bd0000",
    url = "https://www.gnu.org/licenses/gpl-3.0",
    alt = "GNU GPLv3 License"
  )
)
```

```text
Copyright (C) 2025 Daniel Vartanian

logolink is free software: you can redistribute it and/or modify it under the
terms of the GNU General Public License as published by the Free Software
Foundation, either version 3 of the License, or (at your option) any later
version.

This program is distributed in the hope that it will be useful, but WITHOUT ANY
WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A
PARTICULAR PURPOSE. See the GNU General Public License for more details.

You should have received a copy of the GNU General Public License along with
this program. If not, see <https://www.gnu.org/licenses/>.
```

## Contributing

```{r}
#| echo: false
#| output: asis

cat(
  badge_custom(
    x = "Contributor%20Covenant",
    y = "3.0",
    color = "4baaaa",
    url = "https://www.contributor-covenant.org/version/3/0/code_of_conduct/",
    alt = "Contributor Covenant 3.0 Code of Conduct"
  )
)
```

Contributions are always welcome! Whether you want to report bugs, suggest new features, or help improve the code or documentation, your input makes a difference.

Before opening a new issue, please check the [issues tab](https://github.com/danielvartan/logolink/issues) to see if your topic has already been reported.

[![GitHub Sponsors Badge](https://img.shields.io/static/v1?label=Sponsor&message=%E2%9D%A4&logo=GitHub&color=%23fe8e86)](https://github.com/sponsors/danielvartan)

You can also support the development of `logolink` by becoming a sponsor.

Click [here](https://github.com/sponsors/danielvartan) to make a donation. Please mention `logolink` in your donation message.

## Acknowledgments

`logolink` brand identity is based on the [NetLogo 7](https://www.netlogo.org/) brand identity.
